<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=ABeeZee|Josefin+Sans" rel="stylesheet">
  <title>Jason Yim</title>
  <!-- favicon -->
  <link rel="icon" href="images/favicon/favicon.ico">
  <style type="text/css">
  body {
    font-size: 10px;
    font-family: 'Josefin Sans', helvetica, sans-serif;
  }

  nav {
    border-bottom: 1px solid #eaeaea;
    font-size: 1.5em;
  }

  nav a,
  nav a:hover{
    color: black;
  }


  #app>section>div {
    max-width: 900px;
    margin: 0 auto;
    font-size: 1.8em;
  }

  #about {
    text-align: center;
    padding: 6rem 1rem 8rem 1rem;
    background-color: whitesmoke;
  }

  #about img {
    border-radius: 50%;
    box-shadow: 0 0 15px #ccc;
    margin-bottom: 1rem;
  }

  #about .summary {
    max-width: 450px;
    margin: 0 auto;
    margin-bottom: 1rem;
  }

  #about .skills ul {
    list-style: none;
    padding: 0;
  }

  #about .skills li {
    text-decoration: none;
    display: inline-block;
    border-radius: 8px;
    border: 1px solid #ddd;
    padding: 6px;
    margin: 2px;
    background-color: white;
  }

  #work {
    padding: 5rem 1rem 8rem 1rem;
  } 

  #work h2{
    text-align: center;
    margin-bottom: 3rem;
  }

  #work .company {
    margin-bottom: 5rem; 
  }

  #work .company .logo{
    padding: 2px;
    border: 1px solid #ccc;
    vertical-align: bottom;
  }

  #work .company ul{
    margin-left: 1rem;
  }

  #work .work_projects{ 
    background-color: whitesmoke;
    padding: 1rem;
  }

  #work figure.thumbnail{
    max-width: 150px;  
    margin: 0 auto;
  }

  #work figure.thumbnail img{
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #ccc;
    cursor: pointer;
  }

  #work figure.thumbnail img:hover{ 
    /*opacity: 0.9;*/ 
  }

  #work .modal-body {    
    padding: 0; 
  }

  #work .modal-body figure{    
    margin: 0; 
  }

  #work .carousel-control-prev,
  #work .carousel-control-next{
    opacity: 0;
  }

  #work .carousel-control-prev:hover,
  #work .carousel-control-next:hover{
    background-color: black;
    color: white;
    opacity: 0.1;
  } 

  #work .nav.nav-pills .nav-link{     
    border: 1px solid #ccc;
    border-radius: 0;
    margin-bottom: 2px;  
  }
 
  #work .nav.nav-pills .nav-link.active{
    background-color: #333;
    border-radius: 0; 
    border-color: #333;
  }

  #work .nav.nav-pills .nav-link.active:hover{
    background-color: #333;  
    border-radius: 0; 
  }

  #work .nav.nav-pills .nav-link:hover{
    background-color: white;
    border: 1px solid #333; 
    border-radius: 0; 
  }

  #work a{
    color: black; 
  }

  #work a.active{
    color: white; 
  }

  #work a[data-toggle=modal]{
    padding: 6px 8px 6px 8px;
    border: 1px solid #ccc;
    background-color: white;
    text-decoration: none;
    border-radius: 8px;
    font-size: 1rem;
    margin-left: 1rem;
  }

  #work a[data-toggle=modal]:hover{
    background-color: #333;
    color: white;
    border-color: #333; 
  }

  ul, li{
    margin: 0;
    padding: 0; 
  }
  ul{
    padding: 10px;
  } 

  #websites {
    padding: 2rem;
  }

  #websites .gallery-item:nth-child(odd) {
    background-color: #eaeaea;
    -webkit-clip-path: polygon(0 0, 100% 2%, 100% 98%, 0% 100%);
    clip-path: polygon(0 0, 100% 2%, 100% 98%, 0% 100%);
    padding: 3rem;
  }


  #games {
    text-align: center;
    padding: 5rem 1rem 5rem 1rem;
    background-color: #333;
    color: whitesmoke;
  }

  #games .techs {
    list-style: none;
    padding: 0;
  }

  #games .techs li {
    text-decoration: none;
    display: inline-block;
    border-radius: 8px;
    border: 1px solid #ddd;
    padding: 6px;
    margin: 2px;
    background-color: transparent;
  }

  #games .gallery {
    margin: 2rem 0 2rem 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-content: center;
  }

  /* The flip card container - set the width and height to whatever you want. We have added the border property to demonstrate that the flip itself goes out of the box on hover (remove perspective if you don't want the 3D effect */
  .flip-card {
    background-color: transparent;
    width: 300px;
    height: 300px;
    perspective: 1000px;
    /* Remove this if you don't want the 3D effect */
    margin: 0 auto; 
  }

  /* This container is needed to position the front and back side */
  .flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.8s;
    transform-style: preserve-3d;
    border: 1px solid #111;
  }

  /* Do an horizontal flip when you move the mouse over the flip box container */
  .flip-card:active .flip-card-inner {
    /*transform: rotateY(180deg);*/
  }

  /* Position the front and back side */
  .flip-card-front,
  .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
  }

  /* Style the front side (fallback if image is missing) */
  .flip-card-front {
    color: black;
    cursor: pointer;
  }

  /* Style the back side */
  .flip-card-back {
    transform: rotateY(180deg);
    background-color: #222;
    padding: 1rem;
  }

  #artworks {
    text-align: center;
    padding: 5rem 1rem 5rem 1rem;
    background-color: #222;
    color: whitesmoke;
  }

  #artworks .gallery {
    margin: 2rem 0 2rem 0;
    min-height: 860px;
  } 
  #artworks .gallery .item {
    margin: 0 auto;
    max-width: 700px;
  } 
  #artworks .gallery .item img{
    margin-bottom: 1rem;
  } 
  #artworks .gallery .item p {
    text-align: left;
  }



  .carousel-indicators {
    position: relative;      
  } 

  #contact {
    background-color: whitesmoke;
    height: 100%;
    text-align: center;
    padding: 5rem 1rem 5rem 1rem;
    min-height: 180px;
    margin: 0 auto;
  }

  #contact a {
    text-decoration: none;
    color: black;
  }

  #splash {
    margin: 0 auto;
    height: 100vh;
    display: flex;
    justify-content: space-evenly;
    align-content: stretch;
    overflow: hidden;
    background-color: black;
  }

  #splash .box {
    padding: 4px;
  }

  #splash .artifact {
    width: 100%;
    height: 100%;
    transition: 0.8s;
  }

  #splash .square {
    /*border: 5px solid black;*/
    /*box-shadow: 3px 3px 3px #aaa;*/
    border-radius: 50%;
  }

  #splash .frame {
    /*border: 5px solid black; */
    display: flex;
    align-items: center;
    /*box-shadow: 3px 3px 3px #aaa;*/
    border-radius: 15px;
    transition: 0.8s;
  }

  #splash .frame .inner-frame {
    /*border: 5px solid black;*/
    width: 50px;
    height: 50px;
    margin: 0 auto;
    background-color: black;
    border-radius: 10px;
  }

  </style>
</head>

<body>
  <nav></nav>
  <main></main>
  <!-- Optional JavaScript -->
  <!-- jQuery first, then Popper.js, then Bootstrap JS -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script type="text/javascript">
  Number.prototype.forEvery = function(fn) {
    var l = this;
    for (var x = 0; x < l; x++) {
      if (fn) { fn(x); }
    }
  };
  Number.prototype.isOdd = function() { return this % 2; }

  function getData(path, fn) {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", path, true);
    xhr.onreadystatechange = function(e) {
      if (xhr.readyState === 4) {
        if (xhr.status === 200) {
          if (fn) {
            fn(JSON.parse(xhr.responseText));
          }
        } else {
          console.error(xhr.statusText);
        }
      }
    };
    xhr.onerror = function(e) {
      console.error(xhr.statusText);
    };
    xhr.send();
  }

  function BuildApp(data) {
    var app = new App(data);
    var nav = document.getElementsByTagName('nav')[0];
    var main = document.getElementsByTagName('main')[0];
    // nav.innerHTML = app.nav;
    main.innerHTML = app.html;
    app.components.forEach(function(component) {
      component.performJavascriptFunctions();
    });
  }

  class Component {
    constructor(data, tagName) {
      this.data = data;
      this.tagName = tagName ? tagName : 'div';
      this.name = this.data.name;
      this.content = this.data.content;
      this.gallery = this.data.gallery;
      this.html = this.fill();
    }
    fill() {
      return '<' + this.tagName + '></' + this.tagName + '>\r';
    }
    performJavascriptFunctions() {

    }
  }

  class App extends Component {
    constructor(data) {
      super(data);
      this.nav = this.createNav();
    }
    fill() {
      var text = '';
      var self = this;
      this.components = [];
      text += '<div id="' + this.name + '">\r';
      this.gallery.forEach(function(item, index) {
        if (!item.display) { return; }
        var name = item.name;
        var component;
        switch (name) {
          case 'splash':
            self.splash = component = new Splash(item);
            break;
          case 'about':
            self.about = component = new About(item);
            break;
          case 'work':
            self.work = component = new Work(item);
            break;  
          case 'websites':
            self.websites = component = new Websites(item);
            break;
          case 'games':
            self.games = component = new Games(item);
            break;
          case 'artworks':
            self.artworks = component = new Artworks(item);
            break;
          case 'contact':
            self.contact = component = new Contact(item);
            break;
          default:
            component = new Component(item, 'section');
        }
        self.components.push(component);
        text += component.html;
      });
      text += '</div>\r';
      return text;
    }
    createNav() {
      var text = '';
      text += '<nav>\r';
      text += '<ul class="nav justify-content-end">\r';

      this.gallery.forEach(function(item, index) {
        if (!item.display) { return; }
        var name = item.name;
        text += '<li class="nav-item">\r';
        text += '<a class="nav-link active" href="#' + name + '">' + item.content.title + '</a>\r';
        text += '</li>\r';
      });

      text += '</ul>\r';
      text += '</nav>\r';
      return text;
    }
  }
 
  class About extends Component {
    constructor(data) {
      super(data);
    }
    fill() {
      var text = '';
      var content = this.content;
      text += '<section id="' + this.name + '">\r';
      text += '<div>\r';
      text += '<h2>' + content.name + '</h2>\r';
      text += '<img class="img-fluid" src="' + content.image + '">\r';
      text += '<h3>' + content.jobTitle + '</h3>\r';
      text += '<p class="summary">' + content.summary + '</p>\r';

      text += '<section class="skills">\r';
      text += '<h3>Skills and Knowledge</h3>\r';
      text += '<ul>\r';
      content.skills.forEach(function(skill) {
        text += '<li>' + skill + '</li>\r';
      });
      text += '</ul>\r';
      text += '</section>\r';
      text += '</div>\r';

      text += '</section>\r';
      return text;
    }
  }

  class Carousel extends Component {
    constructor(data, id) {
      super(data);
      this.id = id;
      this.html = this.fill();
    }
    fill() {
      var text = '';
      var self = this;
      text += '<div id="'+this.id+'" class="carousel slide" data-ride="carousel" data-interval="5000">\r';
      // text += '<ul class="carousel-indicators">\r';

      // this.gallery.forEach(function(item, index){
      //   text += '<li data-target="#'+self.id+'" data-slide-to="'+index+'"'+( index == 0 ? ' class="active"' : '') +'></li>\r';
      // });
       
      // text += '</ul>\r';
      text += '<div class="carousel-inner">\r';

      this.gallery.forEach(function(item, index){
        text += '<div class="carousel-item'+(index == 0 ? ' active' : '')+'">\r';
        text += '<div class="item">\r';   
        text += '<figure>\r'; 
        text += item.link ? '<a href="'+item.link+'" target="_blank">\r' : '';
        text += '<img class="img-fluid" src="'+item.image+'">\r';
        text += item.link ? '</a>\r' : '';
        text += '<figcaption>'+item.caption+'</figcaption>\r';
        text += '</figure>\r'; 
        text += '</div>\r'; 
        text += '</div>\r';
      });

      text += '<a class="carousel-control-prev" href="#'+this.id+'" data-slide="prev">\r';
      text += '<span class="carousel-control-prev-icon"></span>\r';
      text += '</a>\r';
      text += '<a class="carousel-control-next" href="#'+this.id+'" data-slide="next">\r';
      text += '<span class="carousel-control-next-icon"></span>\r';
      text += '</a>\r';
      text += '</div>\r';
      text += '</div>\r';
      return text;
    }
  }

  class Modal extends Component {
    constructor(data, id) {
      super(data); 
      this.id = id;
      this.html = this.fill();
    }
    fill() { 
      var text = '';
      text += '<div class="modal fade" id="'+this.id+'">\r';
      text += '<div class="modal-dialog modal-lg">\r';
      text += '<div class="modal-content">\r';
      text += '<div class="modal-header">\r';
      text += '<h4 class="modal-title">'+this.data.title+'</h4>\r';
      text += '<button type="button" class="close" data-dismiss="modal">&times;</button>\r';
      text += '</div>\r';
      text += '<div class="modal-body">\r';
      var carousel_id = this.id+'_carousel';
      var carousel = new Carousel(this.data, carousel_id);
      text += carousel.html;
      text += '</div>\r';
      text += '<div class="modal-footer">\r';
      text += '<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>\r';
      text += '</div>\r';
      text += '</div>\r';
      text += '</div>\r';
      text += '</div>\r';
      return text;
    }
  }

  

  class Work extends Component {
    constructor(data) {
      super(data);
    }
    fill() {
      var text = '';
      var self = this;
      text += '<section id="' + this.name + '">\r';
      text += '<div>\r';
      text += '<h2>' + this.content.title + '</h2>\r';
      text += '<p>' + this.content.summary + '</p>\r';
      text += '<div class="container-fluid gallery">\r';
      this.gallery.forEach(function(item, index) {
        text += '<section class="company">\r';
        text += '<h3>\r';
        text += '<img class="logo" src="'+item.image+'" width="80" height="80">\r';
        text += item.company; 
        text += '</h3>\r'; 
        text += '<p>'+item.start_date+' - '+item.end_date+'</p>\r';

        text += '<ul>\r';
        item.bullets.forEach(function(bullet){
          text += '<li>'+bullet+'</li>\r';
        });
        text += '</ul>\r';

        if(item.projects.length > 0){
          text += '<section class="work_projects">\r';
          text += '<h3>Projects</h3>\r'; 

          text += '<div class="row">\r';
          text += '<div class="col-2">\r';
          text += '<div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">\r';
          
          item.projects.forEach(function(project, p_index){
            text += '<a class="nav-link '+(p_index == 0 ? ' active' : '')+'" id="v-pills-tab'+p_index+'" data-toggle="pill" href="#v-pills-'+p_index+'" role="tab" aria-controls="v-pills-'+p_index+'" aria-selected="true">'+(p_index+1)+'</a>\r';

          });

          text += '</div>\r';
          text += '</div>\r';
          text += '<div class="col-10">\r';
          text += '<div class="tab-content" id="v-pills-tabContent">\r';
          
          item.projects.forEach(function(project, p_index){
            var modal_id = self.name+'_'+item.name+'_'+project.name;
            text += '<div class="tab-pane fade'+(p_index == 0 ? ' show active' : '')+'" id="v-pills-'+p_index+'" role="tabpanel" aria-labelledby="v-pills-tab'+p_index+'">\r';
            text += '<section>\r';
            text += '<div class="row">\r';
            text += '<div class="col-12">\r';
            text += '<h4>'+project.title+'<a href="#" data-toggle="modal" data-target="#'+modal_id+'">View</a></h4>\r'; 
            text += project.summary;
            text += '</div>\r';
            text += '<div class="col-12 col-sm-4 col-md-3">\r';
            text += '<figure class="thumbnail">\r';
            text += '<img class="img-fluid" src="'+project.image+'" data-toggle="modal" data-target="#'+modal_id+'">\r';
            text += '</figure>\r';
            text += '</div>\r';
            text += '<div class="col-12 col-sm-8 col-md-9">\r';
            text += '<ul>\r';
            project.bullets.forEach(function(bullet){
              text += '<li>'+bullet+'</li>\r';
            });
            text += '</ul>\r';
            
            text += '</div>\r';
            text += '</div>\r';
            text += '</section>\r';
            var modal = new Modal(project, modal_id);
            text += modal.html;
            text += '</div>\r';
          });
          
          text += '</div>\r';
          text += '</div>\r';
          text += '</div>\r';


          text += '</section>\r';
        } 
        text += '</section>\r';
      });
      text += '</div>\r';
      text += '</div>\r';
      text += '</section>\r';
      return text;
    }
  }

  class Websites extends Component {
    constructor(data) {
      super(data);
    }
    fill() {
      var text = '';
      text += '<section id="' + this.name + '">\r';
      text += '<div>\r';
      text += '<h2>' + this.content.title + '</h2>\r';
      text += '<p>' + this.content.summary + '</p>\r';
      text += '<div class="container-fluid gallery">\r';
      this.gallery.forEach(function(item, index) {
        text += '<div class="row gallery-item">\r';
        text += '<div class="col-12 col-sm-6">\r';
        text += '<h3>' + item.title + '</h3>\r';
        text += '<p>' + item.desc + '</p>\r';
        text += '</div>\r';
        text += '<div class="col-12 col-sm-6">\r';
        text += '<figure>\r';
        text += '<a href="' + item.link + '" target="_blank">\r';
        text += '<img class="img-fluid" src="' + item.image + '">\r';
        text += '</a>\r';
        text += '</figure>\r';
        text += '</div>\r';
        text += '</div>\r';
      });
      text += '</div>\r';
      text += '</div>\r';
      text += '</section>\r';
      return text;
    }
  }

  class Games extends Component {
    constructor(data) {
      super(data);
    }
    fill() {
      var text = '';
      text += '<section id="' + this.name + '">\r';
      text += '<div>\r';
      text += '<h2>' + this.content.title + '</h2>\r';
      text += '<p>' + this.content.summary + '</p>\r';
      text += '<div class="gallery">\r';
      this.gallery.forEach(function(item, index) {
        text += '<div class="gallery-item">\r';

        text += '<div class="flip-card">\r';
        text += '<div class="flip-card-inner">\r';

        text += '<div class="flip-card-front">\r';
        text += '<figure>\r';
        text += '<img class="img-fluid" src="' + item.image + '">\r';
        text += '</figure>\r';
        text += '</div>\r';

        text += '<div class="flip-card-back">\r';
        text += '<h3>' + item.title + '</h3>\r';
        text += '<p>' + item.desc + '</p>\r';
        text += '<a href="' + item.link + '" target="_blank"><span class="launch">Launch</span></a>\r';
        text += '<ul class="techs">\r';
        item.techs.forEach(function(tech) {
          text += '<li>' + tech + '</li>\r';
        });
        text += '</ul>\r';
        text += '</div>\r';
        text += '</div>\r';

        text += '</div>\r';
        text += '</div>\r';
      });
      text += '</div>\r';
      text += '</div>\r';
      text += '</section>\r';
      return text;
    }
    performJavascriptFunctions() {
      $('.flip-card-front').click(function() {
        $(this).parent().css('transform', 'rotateY(180deg)');
      });
      $('.flip-card-back').click(function() {
        $(this).parent().css('transform', 'rotateY(0deg)');
      });
    }
  }

  class Artworks extends Component {
    constructor(data) {
      super(data);
    }
    fill() { 
      var text = ''; 
      var carousel_id = this.name+'_carousel';
      text += '<section id="'+this.name+'">\r';
      text += '<div>\r';
      text += '<h2>'+this.content.title+'</h2>\r';
      text += '<p>'+this.content.summary+'</p>\r';

      text += '<div class="gallery">\r';
      text += '<div id="'+carousel_id+'" class="carousel slide" data-ride="carousel" data-interval="8000">\r';
      text += '<ul class="carousel-indicators">\r';

      this.gallery.forEach(function(item, index){
        text += '<li data-target="#'+carousel_id+'" data-slide-to="'+index+'"'+( index == 0 ? ' class="active"' : '') +'></li>\r';
      });
       
      text += '</ul>\r';
      text += '<div class="carousel-inner">\r';

      this.gallery.forEach(function(item, index){
        text += '<div class="carousel-item'+(index == 0 ? ' active' : '')+'">\r';
        text += '<div class="item">\r';   
        text += '<figure>\r';
        text += '<h3>'+item.title+'</h3>\r';
        text += item.link ? '<a href="'+item.link+'" target="_blank">\r' : '';
        text += '<img class="img-fluid" src="'+item.image+'">\r';
        text += item.link ? '</a>\r' : '';
        text += '<figcaption>\r';  
        text += '<p><b>Description: </b>'+item.desc+'</p>\r';
        text += '<p><b>Medium: </b>'+item.medium+'</p>\r';
        text += '</figcaption>\r';
        text += '</figure>\r'; 
        text += '</div>\r'; 
        text += '</div>\r';
      });

      text += '<a class="carousel-control-prev" href="#'+carousel_id+'" data-slide="prev">\r';
      text += '<span class="carousel-control-prev-icon"></span>\r';
      text += '</a>\r';
      text += '<a class="carousel-control-next" href="#'+carousel_id+'" data-slide="next">\r';
      text += '<span class="carousel-control-next-icon"></span>\r';
      text += '</a>\r';
      text += '</div>\r';

      text += '</div>\r';
      text += '</div>\r';
      text += '</div>\r';
      text += '</section>\r';
      return text;
    } 
    performJavascriptFunctions(){
      var images = $('#artworks img').toArray();
      var maxHeight = 500;
      setTimeout(function(){
        images.forEach(function(image){ 
          var height = image.naturalHeight;
          var width = image.naturalWidth;
          if(height > width){ 
            var finalWidth = (width/height)*maxHeight+'px'; 
            $(image).css('width', finalWidth);
          } 
        });
      }, 300); 
    }
  }

  class Contact extends Component{
    constructor(data){
      super(data);
    }
    fill(){
      var text = '';
      text += '<section id="'+this.name+'">\r';
      text += '<div>\r';
      text += '<h2>'+this.content.title+'</h2>\r';
      text += '<p><a href="mailto:'+this.content.email+'?" target="_top"> '+this.content.email+'</a> | '+this.content.phone+'</p>\r';
      text += '</div>\r';
      text += '</section>\r';
      return text;
    }
  }
  
  (function(){
    getData('json/data.json', BuildApp); 
  })();
  </script>
</body>

</html>